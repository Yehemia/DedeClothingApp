<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.collections.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import java.lang.Integer?>
<?import java.lang.String?>
<VBox xmlns="http://javafx.com/javafx/11.0.1"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.dedeclothingstore.controller.InventarisController"
      spacing="10" style="-fx-background-color: white;">

    <padding>
        <Insets top="10.0" right="10.0" bottom="10.0" left="10.0"/>
    </padding>

    <!-- Search and Action Buttons -->
    <HBox spacing="10" alignment="CENTER_LEFT">
        <Label text="Cari Produk:" style="-fx-font-weight: bold;"/>
        <TextField fx:id="searchField" promptText="Nama produk, kategori, atau SKU" prefWidth="300"/>
        <Button text="Cari" onAction="#searchProduct" style="-fx-background-color: #4a6fa5; -fx-text-fill: white;"/>
        <Button text="Reset" onAction="#resetSearch" style="-fx-background-color: #666666; -fx-text-fill: white;"/>
        <Button text="Ekspor Data" onAction="#exportData" style="-fx-background-color: #2e8b57; -fx-text-fill: white;"/>
        <Button text="Tambah Produk" onAction="#showAddForm" style="-fx-background-color: #4a6fa5; -fx-text-fill: white;"/>
    </HBox>

    <!-- Product Table -->
    <TableView fx:id="productTable" style="-fx-font-size: 14px;">
        <columns>
            <TableColumn fx:id="colName" text="Nama Produk" prefWidth="150">
                <cellValueFactory>
                    <PropertyValueFactory property="name"/>
                </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="colSKU" text="SKU" prefWidth="100">
                <cellValueFactory>
                    <PropertyValueFactory property="sku"/>
                </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="colCategory" text="Kategori" prefWidth="100">
                <cellValueFactory>
                    <PropertyValueFactory property="category"/>
                </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="colSize" text="Ukuran" prefWidth="70">
                <cellValueFactory>
                    <PropertyValueFactory property="size"/>
                </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="colColor" text="Warna" prefWidth="80">
                <cellValueFactory>
                    <PropertyValueFactory property="color"/>
                </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="colPrice" text="Harga" prefWidth="80">
                <cellValueFactory>
                    <PropertyValueFactory property="price"/>
                </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="colStock" text="Stok" prefWidth="70">
                <cellValueFactory>
                    <PropertyValueFactory property="stock"/>
                </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="colSupplier" text="Supplier" prefWidth="120">
                <cellValueFactory>
                    <PropertyValueFactory property="supplier"/>
                </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="colDate" text="Tanggal Masuk" prefWidth="100">
                <cellValueFactory>
                    <PropertyValueFactory property="entryDate"/>
                </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="colAction" text="Aksi" prefWidth="120"/>
        </columns>
    </TableView>

    <!-- Pagination -->
    <HBox spacing="10" alignment="CENTER_RIGHT">
        <Label fx:id="lowStockLabel" text="" style="-fx-text-fill: red; -fx-font-weight: bold;"/>
        <Label text="Baris per halaman:"/>
        <ComboBox fx:id="itemsPerPageCombo">
            <items>
                <FXCollections fx:factory="observableArrayList">
                    <Integer fx:value="5"/>
                    <Integer fx:value="10"/>
                    <Integer fx:value="20"/>
                    <Integer fx:value="50"/>
                </FXCollections>
            </items>
            <value>
                <Integer fx:value="10"/>
            </value>
        </ComboBox>
        <Button fx:id="prevPageBtn" text="&lt; Sebelumnya" onAction="#previousPage"/>
        <Label fx:id="pageInfoLabel" text="Halaman 1 dari 1"/>
        <Button fx:id="nextPageBtn" text="Berikutnya &gt;" onAction="#nextPage"/>
    </HBox>

    <!-- Add/Edit Form (Initially Hidden) -->
    <VBox fx:id="formContainer" spacing="10.0"
          style="-fx-background-color: #f0f0f0; -fx-border-color: #d3d3d3; -fx-border-width: 1 0 0 0;"
          visible="false">

        <padding>
            <Insets top="10.0" right="10.0" bottom="10.0" left="10.0"/>
        </padding>

        <Label text="Tambah/Edit Produk" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>

        <GridPane hgap="10" vgap="10">
            <columnConstraints>
                <ColumnConstraints percentWidth="15"/>
                <ColumnConstraints percentWidth="35"/>
                <ColumnConstraints percentWidth="15"/>
                <ColumnConstraints percentWidth="35"/>
            </columnConstraints>

            <children>
                <!-- Column 1 -->
                <Label text="Nama Produk:*" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <TextField fx:id="nameField" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                <Label text="Kategori:*" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <ComboBox fx:id="categoryComboBox" GridPane.rowIndex="1" GridPane.columnIndex="1">
                    <items>
                        <FXCollections fx:factory="observableArrayList">
                            <String fx:value="Kaos"/>
                            <String fx:value="Celana"/>
                            <String fx:value="Jaket"/>
                            <String fx:value="Dress"/>
                            <String fx:value="Aksesoris"/>
                        </FXCollections>
                    </items>
                </ComboBox>

                <Label text="Harga:*" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <TextField fx:id="priceField" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                <Label text="Stok:*" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                <TextField fx:id="stockField" GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                <!-- Column 2 -->
                <Label text="SKU/Barcode:*" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                <TextField fx:id="skuField" GridPane.rowIndex="0" GridPane.columnIndex="3"/>

                <Label text="Ukuran:" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                <ComboBox fx:id="sizeComboBox" GridPane.rowIndex="1" GridPane.columnIndex="3">
                    <items>
                        <FXCollections fx:factory="observableArrayList">
                            <String fx:value="XS"/>
                            <String fx:value="S"/>
                            <String fx:value="M"/>
                            <String fx:value="L"/>
                            <String fx:value="XL"/>
                            <String fx:value="XXL"/>
                            <String fx:value="All Size"/>
                        </FXCollections>
                    </items>
                </ComboBox>

                <Label text="Warna:" GridPane.rowIndex="2" GridPane.columnIndex="2"/>
                <TextField fx:id="colorField" GridPane.rowIndex="2" GridPane.columnIndex="3"/>

                <Label text="Supplier:" GridPane.rowIndex="3" GridPane.columnIndex="2"/>
                <TextField fx:id="supplierField" GridPane.rowIndex="3" GridPane.columnIndex="3"/>

                <!-- Action Buttons -->
                <HBox spacing="10" alignment="CENTER_RIGHT"
                      GridPane.rowIndex="4" GridPane.columnIndex="1" GridPane.columnSpan="3">
                    <Button fx:id="saveButton" text="Simpan" onAction="#saveProduct"
                            style="-fx-background-color: #4a6fa5; -fx-text-fill: white; -fx-font-weight: bold; -fx-pref-width: 100;"/>
                    <Button fx:id="updateButton" text="Update" onAction="#updateProduct" visible="false"
                            style="-fx-background-color: #2e8b57; -fx-text-fill: white; -fx-font-weight: bold; -fx-pref-width: 100;"/>
                    <Button fx:id="cancelButton" text="Batal" onAction="#cancelEdit"
                            style="-fx-background-color: #666666; -fx-text-fill: white; -fx-font-weight: bold; -fx-pref-width: 100;"/>
                    <Button text="Reset Form" onAction="#resetForm"
                            style="-fx-background-color: #ff8c00; -fx-text-fill: white; -fx-font-weight: bold; -fx-pref-width: 100;"/>
                </HBox>
            </children>
        </GridPane>
    </VBox>
</VBox>